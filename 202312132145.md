---
tags: [programming-language, interface, java, c, cpp]
---

# Java Native Interface (JNI)

JNI is a programming framework that is part of the Java Developer Kit (JDK)
which allows [Integrative Programming](202311041150.md), meaning that Java may
interoperate with native applications and libraries written in other programming
language. That being said, it sacrifices the benefit of JVM being cross-platform
and instead becoming platform dependent, and runtime debugging becomes more
difficult.

JNI can load the native method implementation (declaration defined in Java
source code) from other library with the following Java and, in this case,
[C++](202302190651.md) codes:

```java
class Happy {
    public native void printText();

    static {
        System.loadLibrary("happy");
    }

    public static void method (String[] args) {
        Happy p1 = new Happy();
        p1.printText();
    }
}
```

```cpp
#include <iosteram>
#include "Happy.h"

JNIEXPORT void JNICALL Java_Happy_printText(JNIEnv *env, jobject obj) {
    std::cout << "Happy New Year!\n";
    return;
}
```

**Note**: `JNIEnv` lets the C or C++ file to have access to all JNI functions.
`jobject` on the other hand refers to `this` Java object created in the Java
source file.

Primitive types in Java don't need conversion when implemented in native codes.
In contrast, object types such as string, class, array, and throwable have to be
converted from either way. String (`jstring`) can be converted to C-string by
the functions `GetStringChars()` or `GetStringUTFChars()` and must be released
by the corresponding `Release` functions. Declaring a new string can be done by
`NewString()` or `NewStringUTF()`. We can get the string's length with the
functions `GetStringLength()` or `GetStringUTFLength()`.
